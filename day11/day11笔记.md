## 1.计算属性computed

1. 定义：要用的属性不存在，要通过已有属性计算得来。
2. 原理：底层借助了Objcet.defineproperty方法提供的getter和setter。
3. get函数什么时候执行？
   - 初次读取时会执行一次。
   - 当依赖的数据发生改变时会被再次调用。
4. 优势：与methods实现相比，内部有缓存机制(复用)，效率更高，调试方便。
5. 备注：
   - 计算属性最终会出现在vm上，直接读取使用即可。
   - 如果计算属性要被修改，那必须写set函数去响应修改，且set中要引起计算时依赖的数据发生改变。

**特点：**

- computed具有缓存性
- computed是同步的，不能进行异步操作
- 数据和属性来源于data数据中，具有多对一的关系



## 2.事件监听watch

1. 定义：监听的属性必须要在data中存在或定义。
2. 原理：底层也是借助了Objcet.defineproperty方法提供的getter和setter
3. 特点：
   - 当被监视的属性变化时，回调函数自动调用，进行相关操作
   - 监视的属性必须存在，才能进行监视
   - watch是异步的，可以进行异步操作
   - 可以配置两个属性 immediate(一进页面立即监听) , deep(深度监听)属性
4. 监听的两种写法：
   - new Vue时传入watch配置
   - 通过vm.$watch监视



**深度监听：**

- Vue中的 watch 默认不监测对象内部值的改变(一层)。
- 配置 deep:true 可以监测对象内部值改变(多层)。
- Vue自身可以监测对象内部值的改变，但Vue提供的watch默认不可以
- 使用watch时根据数据的具体结构，决定是否采用深度监视。



**Vue中的watch和computed和methods有什么区别？**

-  watch: 一个对象，键是需要观察的表达式，值是对应回调函数。主要用来监听某些特定数据的变化，从而进行某些具体的业务逻辑操作。可以看作是computed和methods的结合体。 
-  computed: 属性的结果会被缓存，除非依赖的响应式属性变化才会重新计算。主要当属性来使用。 
-  methods: 方法表示一个具体的操作，主要是书写业务逻辑。 



1、功能上：computed是计算属性，watch是监听一个值的变化，然后执行对应的回调。

2、是否调用缓存：computed中的函数所依赖的属性没有发生变化，那么调用当前的函数的时候会从缓存中读取，而watch在每次监听的值发生变化的时候都会执行回调。

3、是否调用return：computed中的函数必须要用return返回，watch中的函数不是必须要用return。

4、computed默认第一次加载的时候就开始监听；watch默认第一次加载不做监听，如果需要第一次加载做监听，添加immediate属性，设置为true（immediate:true）

5、使用场景：
	computed  当一个属性受多个属性影响的时候，使用computed-----购物车商品结算。
	watch  当一条数据影响多条数据的时候，使用watch-----搜索框 。



## 3.样式绑定

1. class样式

   写法：lass="xxx"，xxx可以是字符串、对象、数组。

   - 字符串写法适用于：类名不确定，要动态获取。
   - 数组写法适用于：要绑定多个样式，个数不确定，名字也不确定。
   - 对象写法适用于：要绑定多个样式，个数确定，名字也确定，但不确定用不用。

2. style样式

   - :style="{fontSize: xxx}"，其中xxx是动态值。
   - : style=" [a,b]"，其中a、b是样式对象。



## 4.v-for和key的作用

**v-for指令：**

1. 用于展示列表数据
2. 语法：v-for="(item，index) in xxx" :key="yyy"
3. 可遍历：数组、对象、字符串（少用）、指定次数（少用）



**key的作用：**(在react、vue中)

1. 虚拟DOM中key的作用：

   key是虚拟DOM对象的标识，当数据发生变化时，Vue会根据【新数据】生成【新的虚拟DOM]，随后Vue进行【新虚拟DOM】与【旧虚拟DOM】的差异比较

2. 对比规则：

   - 旧虚拟DOM中找到了与新虚拟DOM相同的key：

     1. 若虚拟DOM中内容没变，直接使用之前的直实DOM
     2. 若虚拟DOM中内容变了，则生成新的真实DOM，随后替换掉页面中之前的真实DOM。

   - 旧虚拟DOM中未找到与新虚拟DOM相同的key

     创建新的真实DOM，随后渲染到到页面。

3. 用index作为key可能会引发的问题:

   - 若对数据进行：逆序添加、逆序删除等破坏顺序操作:
     会产生没有必要的真实DOM更新 ==> 界面效果没问题，但效率低。
   - 如果结构中还包含输入类的DOM：
     会产生错误DOM更新 ==> 界面有问题

4. 开发中如何选择key?

   - 最好使用每条数据的唯一标识作为key，比如id、手机号、身份证号、学号等唯一值。
   - 如果不存在对数据的逆序添加、逆序删除等破坏顺序操作，仅用于渲染列表用于展示，
     使用indexf作为key是没有问题的。

   



























