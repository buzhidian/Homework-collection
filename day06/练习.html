<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>练习</title>
</head>

<body>
    <div id="app">
    </div>
</body>
<script>

    // 1.链式调用(then)
    // 2.抽离和封装公共promise函数
    // 3.all和race方法
    const p1 = new Promise(function (resolve, reject) {
        setTimeout(() => {
            resolve(1111)
            // reject(1111)
        }, 300)
    })
    const p2 = new Promise(function (resolve, reject) {
        setTimeout(() => {
            resolve(2222)
            // reject(2222)
        }, 500)
    })
    const p3 = new Promise(function (resolve, reject) {
        setTimeout(() => {
            resolve(3333)
            // reject(3333)
        }, 1000)
    })

    Promise.all([p1, p2, p3]).then(res => {
        console.log("res", res);
    })
    Promise.race([p1, p2, p3]).then(res => {
        console.log("res", res);
    })

    /* const p1 = new Promise(function (resolve, reject) {
        setTimeout(() => {
            resolve(1111)
        }, 300)
    })
    const p2 = new Promise(function (resolve, reject) {
        setTimeout(() => {
            resolve(2222)
        }, 500)
    })
    const p3 = new Promise(function (resolve, reject) {
        setTimeout(() => {
            resolve(3333)
        }, 1000)
    })
    Promise.all([p1, p2, p3]).then(res => {
        console.log("res", res);
    })
    Promise.race([p1, p2, p3]).then(res => {
        console.log("res", res);
    }) */


    /* const p1 = new Promise(function (resolve, reject) {
        setTimeout(() => {
            resolve(1111)
        }, 300)
    })
    const p2 = new Promise(function (resolve, reject) {
        setTimeout(() => {
            resolve(2222)
        }, 500)
    })
    const p3 = new Promise(function (resolve, reject) {
        setTimeout(() => {
            resolve(3333)
        }, 1000)
    })
    Promise.all([p1, p2, p3]).then(res => {
        console.log("res", res);
    })
    Promise.race([p1, p2, p3]).then(res => {
        console.log("res", res);
    }) */


    // 4.finally 方法
    function pro() {
        return new Promise(function (resolve, reject) {
            setTimeout(() => {
                resolve("结果")
            }, 1000)
        })
    }
    pro().then(() => {
        console.log("成功的结果");
    }).catch(() => {
        console.log("失败的结果");
    }).finally(() => {
        console.log("最终都要返回的结果");
    })

    /* function pro() {
        return new Promise(function (resolve, reject) {
            setTimeout(() => {
                resolve("结果")
            }, 1000)
        })
    }
    pro().then(() => {
        console.log("111");
    }).catch(() => {
        console.log("2222");
    }).finally(() => {
        console.log("333333");
    }) */


    /* function pro() {
        return new Promise(function (resolve, reject) {
            setTimeout(() => {
                resolve("结果")
            }, 1000)
        })
    }
    pro().then(() => {
        console.log("111");
    }).catch(() => {
        console.log("2222");
    }).finally(() => {
        console.log("333333");
    }) */

    // 5.async和await
    // 例一
    function timeout() {
        return "这是第一个函数"
    }
    async function fn() {
        let res = await timeout()
        console.log(res);
    }
    fn()

    // 例二
    function fn1() {
        return 10
    }

    function fn2(num) {
        // return 11 + num
        return new Error("fn2的错误信息")
    }

    function fn3(num) {
        // return 12 + num
        return new Error("fn3的错误信息")
    }

    function fn4(num) {
        return 13 + num
    }

    function fn5(num) {
        return 14 + num
    }

    async function fn6() {
        try {
            let res = await fn1()
            res = await fn2(res)
            res = await fn3(res)
            res = await fn4(res)
            res = await fn5(res)
            console.log(res);
        } catch (err) {
            console.log(err);
        }

    }
    fn6()

    // 例三
    let str1 = "第一条字段"
    let str2 = "这是第二条字段"
    let str3 = "33333是第三条字段"

    function pro1() {
        return new Promise(function (resolve, reject) {
            setTimeout(() => {
                resolve(str1)
            })
        })
    }

    async function get() {
        let res = await pro1()
        console.log(str2 + "+++" + res);

    }
    get()



    /* function timeout() {
        return "这是第一个函数"
    }
    async function fn() {
        let res = await timeout()
        console.log(res);
    }
    fn()
    function fn1() {
        return 10
    }
    function fn2(num) {
        // return 11 + num
        return new Error("fn2的错误信息")
    }
    function fn3(num) {
        // return 12 + num
        return new Error("fn3的错误信息")
    }
    function fn4(num) {
        return 13 + num
    }
    function fn5(num) {
        return 14 + num
    }
    async function fn6() {
        try {
            let res = await fn1()
            res = await fn2(res)
            res = await fn3(res)
            res = await fn4(res)
            res = await fn5(res)
            console.log(res);
        } catch (err) {
            console.log(err);
        }

    }
    fn6()
    let str1 = "第一条字段"
    let str2 = "这是第二条字段"
    let str3 = "33333是第三条字段"
    function pro1() {
        return new Promise(function (resolve, reject) {
            setTimeout(() => {
                resolve(str1)
            })
        })
    }
    async function get() {
        let res = await pro1()
        console.log(str2 + "+++" + res);

    }
    get() */


    /* function timeout() {
        return "这是第一个函数"
    }
    async function fn() {
        let res = await timeout()
        console.log(res);
    }
    fn()
    function fn1() {
        return 10
    }
    function fn2(num) {
        // return 11 + num
        return new Error("fn2的错误信息")
    }
    function fn3(num) {
        // return 12 + num
        return new Error("fn3的错误信息")
    }
    function fn4(num) {
        return 13 + num
    }
    function fn5(num) {
        return 14 + num
    }
    async function fn6() {
        try {
            let res = await fn1()
            res = await fn2(res)
            res = await fn3(res)
            res = await fn4(res)
            res = await fn5(res)
            console.log(res);
        } catch (err) {
            console.log(err);
        }

    }
    fn6()
    let str1 = "第一条字段"
    let str2 = "这是第二条字段"
    let str3 = "33333是第三条字段"
    function pro1() {
        return new Promise(function (resolve, reject) {
            setTimeout(() => {
                resolve(str1)
            })
        })
    }
    async function get() {
        let res = await pro1()
        console.log(str2 + "+++" + res);

    }
    get() */
    

    // 6.Map对象

    const map = new Map([
        ["name", "小白"],
        ["age", 13]
    ])
    console.log(map.size);
    map.has("name")
    map.get("name")
    console.log(map.has("age"));
    console.log(map.get("age"));
    console.log(map);


    // 添加属性
    const map1 = new Map()
    console.log(map1);
    map1.set("name", "小王")
    map1.set("height", 175)
    map1.set("say", function () {
        console.log("我的身高是175");
    })
    let key = {
        school: "SCHOOL"
    }
    map1.set(key, ["清华", "北大"])
    console.log(map1);

    // 删除属性 
    map1.delete("name")
    console.log(map1);

    // 判断属性是否存在 
    console.log(map1.has("name"));
    console.log(map1.has("height"));
    // 获取属性 
    console.log(map1.get("height"));
    console.log(map1.get(key));
    // 获取长度 
    console.log(map1.size);
    
    // 遍历 
    for (let key of map1) {
        console.log(key);
    }
    // 清空
    map1.clear()
    console.log(map1);


    /* const map = new Map([
        ["name", "小白"],
        ["age", 13]
    ])
    console.log(map.size);
    map.has("name")
    map.get("name")
    console.log(map.has("age"));
    console.log(map.get("age"));
    console.log(map);

    const map1 = new Map()
    console.log(map1);
    map1.set("name", "小王")
    map1.set("height", 175)
    map1.set("say", function () {
        console.log("我的身高是175");
    })
    let key = {
        school: "SCHOOL"
    }
    map1.set(key, ["清华", "北大"])
    console.log(map1);
    map1.delete("name")
    console.log(map1);
    console.log(map1.has("name"));
    console.log(map1.has("height"));
    console.log(map1.get("height"));
    console.log(map1.get(key));
    console.log(map1.size);
    for (let key of map1) {
        console.log(key);
    }
    map1.clear()
    console.log(map1); */


    /* const map = new Map([
        ["name", "小白"],
        ["age", 13]
    ])
    console.log(map.size);
    map.has("name")
    map.get("name")
    console.log(map.has("age"));
    console.log(map.get("age"));
    console.log(map);

    const map1 = new Map()
    console.log(map1);
    map1.set("name", "小王")
    map1.set("height", 175)
    map1.set("say", function () {
        console.log("我的身高是175");
    })
    let key = {
        school: "SCHOOL"
    }
    map1.set(key, ["清华", "北大"])
    console.log(map1);
    map1.delete("name")
    console.log(map1);
    console.log(map1.has("name"));
    console.log(map1.has("height"));
    console.log(map1.get("height"));
    console.log(map1.get(key));
    console.log(map1.size);
    for (let key of map1) {
        console.log(key);
    }
    map1.clear()
    console.log(map1); */


    // 7.Set数组

    let s = new Set()

    // 1. 添加元素--只能单独进行添加
    s.add("清华","北大")
    s.add("北大")
    console.log(s);

    // 2. 删除元素--根据内容而不是下标
    s.delete("清华")
    console.log(s);

    // 3. 检测值是否存在
    console.log(s.has("清华"));
    console.log(s.has("上交"));

    // 4. 循环遍历
    for (let key of s){
        console.log(key);
    }
    
    // 5. 获取长度
    console.log(s.size);

    // 6. 去重
    let array = [1,1,1,2,3,3,45,66,6,6,6]
    let res = new Set(array)
    console.log(res);

    // 7.将 Set数组变成数组
    console.log([...res]);
    console.log(Array.from(res));


    /* let s = new Set()
    s.add("清华","北大")
    s.add("北大")
    console.log(s);

    s.delete("清华")
    console.log(s);

    console.log(s.has("清华"));
    console.log(s.has("上交"));

    for (let key of s){
        console.log(key);
    }
    
    console.log(s.size);

    let array = [1,1,3,3,444,5,5,5,6,6]
    let res = new Set(array)
    console.log(res);
    console.log([...res]);
    console.log(Array.from(res)); */

    
    /* let s = new Set()
    s.add("清华","北大")
    s.add("北大")
    console.log(s);

    s.delete("清华")
    console.log(s);

    console.log(s.has("清华"));
    console.log(s.has("上交"));

    for (let key of s){
        console.log(key);
    }
    
    console.log(s.size);

    let array = [1,1,3,3,444,5,5,5,6,6]
    let res = new Set(array)
    console.log(res);
    console.log([...res]);
    console.log(Array.from(res)); */

</script>

</html>